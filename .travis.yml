sudo: required
dist: trusty
group: edge

language: node_js

os:
  - linux

node_js:
  - '5'
  - '4'
  - '0.12'
  - '0.10'
  - 'iojs'

after_success:
  - npm run coveralls
  - npm run coverage-clean

before_deploy:
  - echo "Deploying to GitHub releases"
  - ls -al releases

deploy:
  provider: releases
  api_key:
    secure: "h4y078SPKfLR+AZBGzmr6ZrXOXibMIIeftbo7jMf7hjYbTrEnrWKfH2ue3ANX/jKJxjH6yq/rHPKd8sN+HaghVA9WztSgUoyntMuo7NTIseR6ak2LK1eNyJ7cMd6GSvUgReKW2vnFBRXAmgvFwF1DuFViTxUZB07COGcQWguuIJ3uhW7lIFGxr/zpCIgPGzo45trPI+fz1qhG0cBJQMDJ9Tty8iI4wH+eHJObK6PR2XJnCDo5Bz2Fb3OetjfkT7hCe7G+Y6SlsdYrUocjcA31KH4jrvaxTwb6+G/Mu6d9jDBnWxQBrlg4Dnj08q4mjLQU2mnsXd3XtXn0z5bgDdARabGGKHsizj0X+wzLZRueHIv+18mEY0KG8Mt7VvnFym52IUU2VmjBre5c0hGfikiFRDtktwgxYl1jfCzqRZ8/EtuflMz840L8HtBsE/Dyd6O/KfHmXwlgFOL4PNR/1up5+5lflrdV8zYZIrjJdmNKBgeocBRl5+uf32snNnM4Bv5WResgm0/L8Ac66tqBiYl0mBQCETFgiz1ZkJoPM8MW0vI/n+Lfl20bQ6tKuNlA+ZS3BjDO8E17TwXBu95BX+ce98jnP362bw/lrvQRguKZn2cUeOdGUqV1wXYLsj0G0p0FjGZJR6VhjpYRBtzusCTqwVJn407k9fvCEM5YWgAJO4="
  file_glob: true
  file:
    - 'releases/*.*'
  overwrite: true
  skip_cleanup: true
  on:
    # https://docs.travis-ci.com/user/deployment#Conditional-Releases-with-on
    tags: true  # Deploy app only when a tag is applied to the commit
    node: '4'
