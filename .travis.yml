sudo: required
dist: trusty
group: edge

language: node_js

os:
  - linux

node_js:
  - '5'
  - '4'
  - '0.12'
  - '0.10'
  - 'iojs'

after_success:
  - npm run coveralls
  - npm run coverage-clean

before_deploy:
  - echo "Deploying to GitHub releases"
  - ls -al releases

deploy:
  provider: releases
  api_key:
    secure: "nmJ4pJNw6XfDDML0HjMOemNWq8Bhl1CdyQbTMXFNwY6o7aCv64vQLrOJM6ikgptXByLAHmgTxl9sVAxtDm8VrjuTkN1fPs3cMvkWpeBuy70vWUvn1qHNj5pPvKAclxN+TAZoYh2NEcXFK1/64ciSEeJW9nIjkSDg/ff6pa6vK67fAVHWF12B3gkWY2nDtuSxecu13oz8Qbi9opZpv/MVU/QWliFkueKYCxK8eD8VCFekl213yjrW6DEzDmZVfGch3P49Ed30kazLdDsIo0is6hTUvoYD4P1+AwekpyVvt/xR+iqCiqkX4vn0LaVrLqb0JE5576SjKZHtKFRfTtq2j8LkIJ9vNpEwF2yWIEC1vZ0WNZe7Wie5zlLZ1UZezldbU+t3kt5HRXhqglOoRw+0BEQ+co5vHJAtNJCYFEszpYykz8lB0DpnAYFhoVd9fwj1ny63clPoB88K1rnQFg/iNhg3qI3OZX285MJQPz4ozKZ8IWqh/h/NzSbPqyF1k+5fYk/UQ3mQLs6eDOp4kq1wlntQBMCgYlj03pE+QH9oiGStoAUX8FCh6EcV5wJvCRT9DvulemLnvc8FdRPe1YvXljXh2elEYOYNM/GVVRIAI5BeLYT2/Wlo4IaDVqYBEQWRe0PS4hCKYTsnVBUnK6HOYoScdmkHOnyZVZJZ+YsvB/Y="
  file_glob: true
  file:
    - 'releases/*.*'
  overwrite: true
  skip_cleanup: true
  on:
    # https://docs.travis-ci.com/user/deployment#Conditional-Releases-with-on
    tags: true  # Deploy app only when a tag is applied to the commit
    node: '4'
